<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>瀑布流</title>
    <link rel="stylesheet" type="text/css" href="./src/style/demo.css"/>
</head>
<body>
<div class="container">
    <h3>瀑布流 <span style="display: block;float: right;"><a href="https://github.com/lowguy/Waterfall/" style="text-decoration:none;color: #888">源码</a></span></h3>
</div>
<div class="container">
    <div class="waterfall">
        <div class="pin" data-scroll-reveal>
            <div class="img"></div>
            <p>瀑布流 Waterfall flow</p>
        </div>
        <div class="pin" data-scroll-reveal>
            <div class="img"></div>
            <p>瀑布流 Waterfall flow</p>
        </div>
        <div class="pin" data-scroll-reveal>
            <div class="img"></div>
            <p>瀑布流 Waterfall flow</p>
        </div>
        <div class="pin" data-scroll-reveal>
            <div class="img"></div>
            <p>瀑布流 Waterfall flow</p>
        </div>
        <div class="pin" data-scroll-reveal>
            <div class="img"></div>
            <p>瀑布流 Waterfall flow</p>
        </div>
        <div class="pin" data-scroll-reveal>
            <div class="img"></div>
            <p>瀑布流 Waterfall flow</p>
        </div>
        <div class="pin" data-scroll-reveal>
            <div class="img"></div>
            <p>瀑布流 Waterfall flow</p>
        </div>

    </div>
</div>
<script src="./src/js/jquery-2.1.1.min.js"></script>
<script src="./src/js/scrollReveal/scrollReveal.min.js"></script>
<script>
    var height = 300
            ,num = 5;
    var config = {
        after: '0s',
        enter: 'bottom',
        move: '24px',
        over: '0.3s',
        easing: 'ease-in-out',
        viewportFactor: 0.3,
        reset: true,
        init: true
    };
    window.scrollReveal = new scrollReveal(config);
    $(window).scroll(function(){
        var documentH = document.documentElement.clientHeight;
        var scrollH = document.documentElement.scrollTop || document.body.scrollTop;
        if((documentH+scrollH)>=$('.waterfall').outerHeight()){
            var _html = '<div class="pin hide" data-scroll-reveal><div class="img"></div><p>瀑布流 Waterfall flow</p></div>';
            for(var i=1;i <= num;i++){
                _html += _html;
            }
            $(".waterfall").append(_html);
            _initImg($('.pin.hide'));
            scrollReveal.init();
        }
    });

    _initImg($('.pin'));

    function _initImg(obj) {
        $(obj).each(function(){
            if($(this).hasClass('hide')){
                $(this).removeClass('hide');
            }
            height = Math.floor(Math.random() * 200) + 100;
            $(this).find('.img').css({"height":height+"px"});
        });
    }
</script>
</body>
</html>
